
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>Merb/Rails merge, or Why should merbists be happy? - Matt Aimonetti</title>
    <meta name="author" content="Matt Aimonetti">

    
    <meta name="description" content="Merb/Rails Merge, or Why Should Merbists Be Happy? December 23, 2008, was an important day for the Ruby community. People who used to argue and not get along, have &hellip;">
    
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />

    <link href="/atom.xml" rel="alternate" title="Matt Aimonetti" type="application/atom+xml">
    <link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <meta name="google-site-verification" content="nx3a_0e6HT0nLCJ3HPHknL31CcLJanwyI3WvqJWZjaA" />
    
  <script type="text/javascript">
    var _gaq = _gaq || [];
    var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
    _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
    _gaq.push(['_setAccount', 'UA-30927742-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


<meta property="twitter:account_id" content="16476741" />

</head>


<body>
	<header><div id='meta' class='inner'>
  <div id="matt-aimonetti" itemscope itemtype="http://data-vocabulary.org/Person">
    <a href='/about/'><img class="photo left" title='About Matt Aimonetti'
      alt='Photo of Matt Aimonetti' src="/images/matt_aimonetti.jpg" /></a>
    <h1 class="left"><a itemprop="name" href="/">Matt Aimonetti</a></h1>
    <br>
    <ul class='left bio-summary'>
      <li> <a href="https://splice.com"><span
              itemprop="affiliation">Splice</span></a> co-founder</a></li>
      <li><a href='http://www.oreillynet.com/pub/au/4385'>Author</a> at <span itemprop="affiliation">O'Reilly</span></li>
      <li>Open Source <a href="/posts/archives/">enthusiast</a></li>
      <li><a href="https://github.com/mattetti">Web engineer</a></li>
    </ul>
  <div class="right">
    <div class="right">
      <div id="cse-search-form">Loading</div>
      <div class="social right">
        
        
        <a class="google" rel='me' href="https://plus.google.com/101114877505962271216?rel=author" title="Google+">Google+</a>
        
        
        <a class="twitter" rel='me' href="http://twitter.com/mattetti" title="Twitter">Twitter</a>
        
        
        <a class="github" rel='me' href="https://github.com/mattetti" title="GitHub">GitHub</a>
        
        
        
        <a class="linkedin" rel='me' href="http://www.linkedin.com/in/mattaimonetti" title="Linkedin">Linkedin</a>
        
        
        <a class="rss" rel='me' href="/atom.xml" title="RSS">RSS</a>
        
      </div>
      <nav class="menu"><ul class="main">
  <li><a href="/">Home</a></li>
  <li><a href="/articles/categories/blog-post/">Articles</a></li>
  <li><a href="/articles/categories/presentation/">Presentations</a></li>
  <li><a href="/about/" rel='me'>About</a></li>
</ul>
</nav>
    </div>
  </div>
</div>

</header>
	

	<div id="content" class="inner"><article class="post hentry">
  
    <h1 class="title entry-title">Merb/Rails Merge, or Why Should Merbists Be Happy?</h1>
    <div class="entry"><p><a href="http://flickr.com/photos/xrrr/2478140383/"><img src="http://farm4.static.flickr.com/3211/2478140383_8e2e4ab7a3_m.jpg" alt="" /></a>December 23, 2008, was an important day for the Ruby community. People who used to argue and not get along, have decided to sit down, talk and evaluate their differences. The end result is a strong collaboration of two teams who share the exact same goal.</p>

<p>Overall, the news was very well received, just look at the tweets out there and the comments on <a href="http://yehudakatz.com/2008/12/23/rails-and-merb-merge/">Yehuda&#8217;s</a> and <a href="http://weblog.rubyonrails.org/2008/12/23/merb-gets-merged-into-rails-3">Rails&#8217; blogs</a>.</p>

<p>Interestingly enough, the Rails community really embraced this decision and just got totally excited about the perspective of merging merb&#8217;s philosophy and expertise into Rails. If you re-read David&#8217;s blog post you can see that it&#8217;s a <strong>real homage to Merb</strong>.</p>

<p>The rest of the internet sounds pretty happy about the news, here are few posts:</p>

<ul>
<li><p><a href="http://arstechnica.com/news.ars/post/20081224-ruby-on-rails-and-merb-to-merge-for-rails-3.html">arstechnica.com</a></p></li>
<li><p><a href="http://www.internetnews.com/dev-news/article.php/3793296/Merb+Merges+With+Rails.htm">internetnews</a></p></li>
</ul>


<p>Even <a href="http://www.zedshaw.com">Zed the entertainer</a> thought it was a good thing:</p>

<blockquote><p><a href="http://www.zedshaw.com/blog/index.html">&#8220;I honestly didnâ€™t think that would ever happen. I just assumed that Merb
would eventually wipe out Rails by being the better framework, or theyâ€™d
wipe each other out soon.</a></p></blockquote>

<p><a href="http://www.zedshaw.com/blog/index.html">So, congrats are in order. You guys are finally grown-ups and now have
the chance to make something better.&#8221;</a></p>

<p>Some <a href="http://iamruinous.com/2008/12/23/why-merb-becoming-rails-3-is-a-good-thing/">merbists like Jade Meskill</a> really understood what we are trying to do while some other ones got really <a href="http://www.mr-eel.com/archives/158">mad at us</a>.</p>

<p>I think a pattern emerged from the negative reactions:</p>

<ul>
<li><p>Why merge when we are about to win?!</p></li>
<li><p>What does Merb win by being merged into Rails?</p></li>
<li><p>Why not merge Rails into Merb?</p></li>
<li><p>You are killing innovation by killing the competition</p></li>
<li><p>You screwed us over and now I have to go &#8220;back&#8221; to Rails</p></li>
<li><p>Rails 3.0 won&#8217;t even be as good as Merb 1.x</p></li>
<li><p>The Rails team won&#8217;t let you do what you have to do to merge Merb into Rails</p></li>
<li><p>DHH is a jerk</p></li>
</ul>


<p>Let me quote Yehuda:Â  <strong>&#8220;Calm yourselves ;)&#8221;</strong>.</p>

<h2>Why merge when we are about to win?!</h2>

<p>This is probably the most rational argument. This is also something the Merb core team considered for a little bit.
Merb is gaining huge momentum and the target audience was very reactive to what we did.
<a href="http://flickr.com/photos/mhaithaca/1317815300/"><img src="http://farm2.static.flickr.com/1087/1317815300_095983272e_m.jpg" alt="" /></a>People such as Yellow Pages, Wikipedia and even Adobe started using or looking seriously at Merb because of its focus on modularity and performance.
We started building an elite community and we were pretty proud of that.</p>

<p>But take a moment to think about it. Our goal has never been to hurt or compete with Rails. Our goals were to get modularity, performance and a strong API. If the Rails team really wants that, and will work on it, why should we work against each other?
It&#8217;s not about winning or losing. It&#8217;s all about the long term plan of your framework, about the people involved and the community behind it. We had to take ourselves out of the equation and consider what would be good for the Ruby community.</p>

<h2>What does Merb win by being merged into Rails?</h2>

<p>People seem to easily find things we might lose but have a hard time finding things we are gaining.
<img src="http://merbist.com/wp-content/uploads/2008/12/rails.png" alt="" />Looking at it on the very short term, this is probably correct. The merb team will have to learn how to work with the Rails team.
We need to understand the reasons behind every single aspect of the code and find ways of merging things nicely.
On top of that, we still need to work on merb as promised. (see Wycats&#8217; post)</p>

<p>However, in the long term we get all the benefits of Rails:
- stability
- community
- traction
- experience
- don&#8217;t have to always justify why use Merb instead of Rails</p>

<p>But more importantly, we extend our team.</p>

<p>Most people using a framework might not realize what it is to work on a big Open Source project.
When you work on an OSS project, people come and go, and that&#8217;s why you usually have a core team of people you can rely on.
Merb has a lot of contributors but a small core team of 5 people (Yehuda, Carl, Daniel, Michael and myself).
Managing a project, such as merb, requires a tremendous amount of time and patience. Rails has the same problem with its core team of 6 people. People have lives, business, projects etc&#8230;</p>

<p>Joining two teams of experts in developing web frameworks in Ruby is like if in the next Soccer World Cup, the French and Italian teams would go on the fields at the same time to beat other teams. 22 players on 1 side, training and learning together. American readers, please imagine the Giants and the Colts facing the Green Bay Packers (I was told I don&#8217;t like the Packers).</p>

<p>Long term, you will get better quality and more frequent releases. We also have different world views and backgrounds which means we will learn a lot from each other, again that means better code for you guys :)</p>

<h2>Why not merge Rails into Merb?</h2>

<p>That&#8217;s actually a good question. We discussed maybe using merb-core as a base for Rails 3.0
The truth is that Merb 2.0 would probably be as big as Rails but more modular.
So we have the choice to keep on building on top of Merb 2.0 or deconstruct Rails.
As the Russians say: &#8216;Ð»Ð¾Ð¼Ð°Ñ‚ÑŒ â€” Ð½Ðµ ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ&#8217;, it&#8217;s always easier to take things apart ;)</p>

<p><img src="http://farm4.static.flickr.com/3033/2814371262_04b9876490_m.jpg" alt="" />Rails already has a test suite, it has already been tested on the wild for a while and its internals are known to many developers. Taking apart the code to make it faster, cleaner and more modular is arguably easier than reinventing the wheel. At the end of the day it doesn&#8217;t really matter from which end you start as long as you end up with the same result.</p>

<p>Some people even asked to come up with a new name for the merged project. Meails, Mr Ails, Reverb, Reab were suggested. While I thought it was a joke, some people were really serious. Can you imagine if during the recent bailout, banks changed names every time they were purchased by another bank? People would be super confused and would not even know where to send their mortgage payments.
On top of that, Rails has a huge user base compared to Merb and has an immense brand recognition in the world at large, it would be foolish to throw that away.</p>

<p>Let&#8217;s not be chauvinistic and see what&#8217;s best for all.</p>

<h2>You are killing innovation by killing the competition</h2>

<p>Again, a good point but my question to you is: Should we stay in the competition just for the sake of it?</p>

<p>Rails clearly told us: we want what you have and we would love you to work with us. So the options were:</p>

<ul>
<li><p>tell them to go to hell and let them try to redo what we already did and know how to do.</p></li>
<li><p>accept to work with them and make Rails a better framework.</p></li>
</ul>


<p><em>Option 1</em> would keep the competition alive, but now you have 2 groups of people trying to do the same thing and being better at different aspects. The community gets confused and communication breaks.</p>

<p><em>Option 2</em>: we lose the Merb vs Rails competition, but we double the amount of people working on Rails and therefore increase the change to make it better faster.</p>

<p>We went for option 2 and we know there is already some competition out there and there will be more coming up soon. I don&#8217;t think it&#8217;s realistic to expect us not to merge because we want to keep the competition going.</p>

<h2>You screwed us over and now I have to go &#8220;back&#8221; to Rails</h2>

<p>Yehuda will blog about some more detailed examples as we are making progress, but you need to stop thinking that Merb will just be absorbed into Rails.
If Rails just wanted to add some &#8220;Merb flavor&#8221; to Rails, they would have just taken whatever they needed and would not be interested in a merge.
See Rails 3.0 as a new generation of Rails, whatever we promised you for merb 2.0 plus all the goodies from Rails. Rails users will still have their default stack and all choices will be made for them (like in the current Merb stack). The difference for standard Rails user will be better performance, a static API and an option to go off the &#8220;golden path&#8221;.
Merbists won&#8217;t lose the stuff they like in Merb, stacks, full support for DataMapper, Sequel and other ORMS, jQuery or other JS library, opt-in solution using just rails-core, better core isolation, built-in RSpec and webrat support, slices, merb-cache, merb-auth and all the other key plugins that will be ported over.</p>

<p>To be able to achieve all of that, we will have to make some infrastructure and code modifications.</p>

<p>Rails internals should end up:</p>

<ul>
<li>way less magical (even Merb uses some magic, but we&#8217;ll make sure to keep it to a minimum)</li>
<li>returning shorter and cleaner stack traces</li>
<li>cleaner (required for the new API)</li>
<li>better isolated (required to increase the modularity)</li>
<li>alias_method_chain won&#8217;t be available at the public API level (we probably still will need some chaining mechanism internally, but that&#8217;s a different story)</li>
</ul>


<p>So, no, you don&#8217;t have to go &#8220;back&#8221; to Rails. In fact, imagine you could do exactly what Rails does but with the performance and modular architecture of Merb. That&#8217;s what you will get with Rails 3.0.</p>

<h2>Rails 3.0 won&#8217;t even be as good as Merb 1.x</h2>

<p>I think I mainly replied to this question in my previous answer.
There is no reason why Rails 3.0 won&#8217;t be better than Merb 1.x.Â  Actually, I believe our API will actually be even better. With the help of David, the existing Rails core team, and the Rails community, we will be able to define an awesome API that will change the way ruby web development will be done.
The merb API is great but we already know some of its limitations and we don&#8217;t have as many plugin developers to work with. Working with plugin developers is something I&#8217;m personally excited about. As a Rails developer I have been really frustrated when using 3rd party plugins and trying to develop my own.
Having a well tested, developed against, public API will make all the Rails 3.0 plugins so much better. And because Merb plugins already use an API, we will be able to port all the plugins over, so it will be at least as good as 1.x
Also, we are going to work on real app benchmark tests to make sure the performance gain is at least as good as what we have with Merb.</p>

<p>Migration will be easy and well documented. We are not giving up on the Merb book and it will be very useful to explain the Merb way to new comers wanting an idea of the new stuff in Rails 3.0. It will also be the best source of information to migrate your app to Rails 3.0.</p>

<p>Talking about migration, we promised to give you a sane migration path when it will be time to migrate.
Again, don&#8217;t freak out because we are changing the name, the spirit of Merb will keep on living.</p>

<h2>The Rails team won&#8217;t let you do what you have to do to merge Merb into Rails</h2>

<p>In all honestly, I was worried about that. I was wondering if all of that was not an evil scam planned by DHH to kill Merb as it was getting a good momentum. I like conspiracy theories and it sounded pretty good.
To my surprised, after a few private conversations with David, I realized that he was genuinely interested in making Rails better for people and fulfill the needs of people who need more flexibility.
Just re-read his blog post <a href="http://weblog.rubyonrails.org/2008/12/23/merb-gets-merged-into-rails-3">http://weblog.rubyonrails.org/2008/12/23/merb-gets-merged-into-rails-3</a>. After what he said, how can he back up and just keep Rails the way it is? And why in the world would he want that to happen?
It&#8217;s a team effort and we have already spent hours and hours discussing some details. I can promise you that the Rails team is very excited about the new stuff that&#8217;s coming up. But don&#8217;t forget that it&#8217;s a merge and we are reconsidering some of the stuff we did in Merb to better re-implement them in Rails 3.0.
So far, I haven&#8217;t seen any of the Rails core team member tell us, no you can&#8217;t do that because that&#8217;s not the way it&#8217;s done in Rails or because we just don&#8217;t like it.</p>

<h2>DHH is a jerk</h2>

<p>Recently, in an interview I gave to rubylearning.com <a href="http://rubylearning.com/blog/2008/12/18/matt-aimonetti-why-on-earth-would-you-ignore-merb/">http://rubylearning.com/blog/2008/12/18/matt-aimonetti-why-on-earth-would-you-ignore-merb/</a> I mentioned that a big difference between Merb and Rails was the way we were dealing with the user base.
I quoted David from an Interview he gave to InfoQ <a href="http://www.infoq.com/interviews/David-Hansson">http://www.infoq.com/interviews/David-Hansson</a> back in 2006.</p>

<p>As part of the merging evaluation process we literally spent hours talking back and forth. I had a seriously hard time believing that Rails and David honestly wanted to change their world views. How can you go from saying what you said in 2006 to adopting what Merb is pushing for: letting the framework bend to make what each developer wants if he doesn&#8217;t want to follow the &#8220;golden path&#8221;?</p>

<p>Interestingly enough, David recently addressed this point on his blog. <a href="http://www.loudthinking.com/posts/36-work-on-what-you-use-and-share-the-rest">http://www.loudthinking.com/posts/36-work-on-what-you-use-and-share-the-rest</a></p>

<p>&#8220;I wanted to take a few minutes to address some concerns of the last 4%. The people who feel like this might not be such a good idea. And in particular, the people who feel like it might not be such a good idea because of various things that I&#8217;ve said or done over the years.&#8221;</p>

<p>First thing first, David addresses the minority of people worried about his image and what it means for them.
So, David actually cares about hard core merbists and he wants them to join the fun. I personally see this as something very encouraging!</p>

<p>A recurring theme we hear a lot is that Rails becomes whatever DHH/37signals needs/wants. If DHH needs something new, it will make it to Rails, if he doesn&#8217;t need it, it won&#8217;t.</p>

<p>David has a very simple and almost shocking response: DHH != Rails</p>

<p>David is really happy with Rails. Rails satisfies his needs but he knows that some people out there need/want something more/different.</p>

<p>&#8220;I personally use all of those default choices, so do many other Rails programmers. The vanilla ride is a great one and it&#8217;ll remain a great one. But that doesn&#8217;t mean it has to be the only one. There are lots of reasons why someone might want to use Data Mapper or Sequel instead of Active Record. I won&#8217;t think of them any less because they do. In fact, I believe Rails should have open arms to such alternatives.&#8221;</p>

<p>So, you can still think whatever you want about David. What&#8217;s important is that Rails is more than David. It&#8217;s an entire team of people with different needs and different views.</p>

<p>DHH isn&#8217;t a dictator and based on concrete examples such as the &#8220;respond_to vs provides&#8221; discussion, I can reassure you that David has been very receptive to arguments and never tried to force any decision because he thought it was better.</p>
</div>

    <div class="meta">
        <div class="date updated">








  


<time datetime="2008-12-25T20:11:02-08:00" pubdate data-updated="true">Dec 25<span>th</span>, 2008</time></div>
        <div class="tags">

<div class="cat">
  
    <a class='category' href='/articles/categories/blog-post/'>blog-post</a>, <a class='category' href='/articles/categories/merb/'>merb</a>, <a class='category' href='/articles/categories/merbist-com/'>merbist.com</a>, <a class='category' href='/articles/categories/rails/'>rails</a>
  
</div>

</div>
        
          <div class='legacy'><a href="http://merbist.com/2008/12/25/merb-rails-merge-or-why-should-merbists-be-happy/">Original article</a></div>
        
        <div class='vcard author'>By <span class='fn'>Matt Aimonetti</span></div>
        <div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
  <a class="addthis_button_tweet"></a>
  </br>
	
	
  <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
  </br>
	
	<a class="addthis_counter addthis_pill_style"></a></br>
	</div>
	<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=mattetti"></script>
</div>

        
    </div>


</article>


</div>
	<footer class="inner"><div id='copyright-notice'>Copyright &copy; 2015 Matt Aimonetti</div>
</footer>
	<script src="/javascripts/jquery.min.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script src="/javascripts/slash.js"></script>
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script type="text/javascript"> 
  google.load('search', '1', {language : 'en'});
  google.setOnLoadCallback(function() {
  var customSearchOptions = {};  var customSearchControl = new google.search.CustomSearchControl(
    '010526096358170648343:WMX140696544', customSearchOptions);
  customSearchControl.setResultSetSize(google.search.Search.LARGE_RESULTSET);
  var options = new google.search.DrawOptions();
  options.enableSearchboxOnly("http://matt.aimonetti.net/search");
  customSearchControl.draw('cse-search-form', options);
  }, true);

if (navigator.userAgent.match(/iPad/i) != null) {
  $('meta[name=viewport]').attr('content', 'width=1200,initial-scale=1,maximum-scale=1');
}
</script>


<script type="text/javascript">
      var disqus_shortname = 'mattaimonetti';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>




</body>
</html>
